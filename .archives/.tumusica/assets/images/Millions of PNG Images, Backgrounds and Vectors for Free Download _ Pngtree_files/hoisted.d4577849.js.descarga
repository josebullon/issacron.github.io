import"./hoisted.38e434a3.js";import{a as u,d as y}from"./index.ddd2b5a1.js";import{h as p}from"./index.b93551d5.js";import"./hoisted.efbfdfb2.js";import"./lazy.ec63ec52.js";import"./index.f0e906af.js";import"./index.cb1d43c3.js";import"./preload-helper.e8d31950.js";function v(){import.meta.url,import("data:text/javascript,").catch(()=>1);async function*e(){}v.g=e}const m="_g6b",b="._q9b label",n={},h="sorry,there are some problems,please contract us...";document.addEventListener("down:prf",e=>{Object.assign(n,e.detail),q()});u("input","._q9b input[name]",function(){this.parentElement.querySelector("span").hidden=!!this.value});let c=null;u("click",b,function(){this.classList.add(m),c=this},()=>{c&&(c.classList.remove(m),c=null)});let f=!1;document.addEventListener("select:change",e=>{if(e.detail.name==="prfLicense"){f=e.detail.value=="1";const t=document.querySelector('input[name="prf_tax_id"]');t&&(t.parentElement.hidden=!f)}});u("click","._r9b",function(){const e=w();if(e){const t=document.querySelector('button[name="prfLicense"]');if(t&&!t.value){alert(t.textContent);return}this.disabled=!0;const a="/api/message/vrf-name"+(n.hasBuy?"-one":n.isTeam?"-team":""),i={name:e.prfRealName,address:e.prfAddress,tax_id:e.prf_tax_id,prf_license:(t==null?void 0:t.value)||void 0,...n.data};p.get(a,i).then(s=>{this.disabled=!1,_(!1),s.status==1&&s.url?g(s.url):s.status==404&&alert(s.info||h)}).catch(()=>{this.disabled=!1})}});function w(){const e=["prfRealName","prfAddress",f?"prf_tax_id":""],t=new Set,o={},a=/^[a-zA-Z0-9]+$/;for(const i of e){if(!i)continue;const s=document.querySelector('._q9b input[name="'.concat(i,'"]'));if(s){const d=s.parentElement,l=s.value.trim();let r=!l;i==="prf_tax_id"&&(l?(r=l.length<6||!a.test(l),r&&d.dataset.errTips&&setTimeout(()=>{alert(d.dataset.errTips)})):r=!1),d.classList[r?"add":"remove"]("_vzb"),r?t.add(0):o[s.name]=l}}return t.size?null:o}function _(e){y(document,"dialog:toggle",{name:"prfActualName",show:e})}function g(e){const t=document.getElementById("down_prf_ifr");t?t.src=e:window.open(e)}async function q(){const e=n.data;if(!e)return;const o="/api/message/vrf-file"+(n.hasBuy?"-one":n.isTeam?"-team":"");p.get(o,{id:e.id,type:e.type,slidesdocs:e.slidesdocs||void 0,controller:e.controller}).then(a=>{if(a.status==1&&a.url)g(a.url);else if(!n.isTeam&&a.status==2)alert("sorry,you cannot download personal PRF");else if(a.status==404)alert(a.info||h);else{if(a.name){const i=document.querySelector('input[name="prfRealName"]');i&&(i.value=a.name)}_(!0)}}).then(n.resolve).catch(n.reject).finally(()=>{delete n.resolve,delete n.reject})}export{v as __vite_legacy_guard};